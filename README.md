# WEEK 04 ASSIGNMENT

Update 9.30pm: I'm going to stop here as everything from this point onwards is things we've done before and because I won't get anything useful completed before the deadline. I'll push it all for the submission but I'll leave the previous commit live on Render because it works. Note that after the first attempt you should always get the same string back in the console, regardless of what you submitted.

I've had to give up on this week's assignment, much like last week's. I managed to get my week's notes caught up pretty much bang on 5pm Friday this time instead of 4pm Sunday, but unlike last week I wasn't able to work through the weekend and I haven't had time to do the assignment. The material all seems pretty straightforward but everything's unfamiliar, I keep getting stuck on tiny things and I'm alone on it as it's the weekend. At the time of writing I've only got as far as a very basic functioning WRRC skeleton, and I'm about to try and deploy it to Render (second try actually as on the first try I realised I'd hardcoded the server URL!). I won't have time to write a proper reflection as it's only 1h40 now to the deadline. I'll get as far as I can by then, but I'm writing this now so that I won't have to rush through writing it later. I'll try and add a few of the problems I had to the section below. There will be plenty of TODOs and other comments in the code. It's OK, I don't mind that I'm failing assignments as my focus is on learning the course, not getting the points. As long as I don't go below some threshold where I get booted out!

Reflection
Please also provide an assignment reflection in your project README.md file.

Required
üéØ What requirements did you achieve?
üéØ Were there any requirements or goals that you were unable to achieve?
üéØ If so, what was it that you found difficult about these tasks?
Optional
üèπ Feel free to add any other reflections you would like to share about your submission, for example:

Requesting feedback about a specific part of your submission.
Q: What useful external sources helped you complete the assignment (e.g Youtube tutorials)?
A: Not much really, it's all in the notes from the week already, I looked a few odd things up like Response.send() to reply in HTML instead of JSON, the textarea HTML element, and the SQL syntax for dropping tables (although that didn't stop me writing IF EXIST instead of IF EXISTS)!
Q: What went really well and what could have gone better?
A: Nothing went really well. Everything is a chore to put together because I haven't come to the point of learning the material yet so I don't have any familiarity or fluency with it, which is frustrating since that's just not the way I learn and it's very time-consuming to do assignments on material I haven't learnt yet. Some things are 0/10 difficulty because of my background and those are generally going better, like I'm on top of the Unix terminal, but I'm stuck making false economies everywhere I turn because I'm so far behind and constantly out of time; for example I haven't even got around to learning how shell scripts or command aliases work in the terminal, even though I know it'll be trivial and would soon save back the time I'd spent. I'm still no closer to getting back to Weeks 1/2 to learn things like accessibility, responsive design and CSS (hence there'll be minimal styling in this assignment again, if I even get that far!)

# What went wrong!

- All requests to the server hung forever with no message (unless I was looking in the wrong place!). I traced it to CORS and then researched and learnt about CORS, only to eventually find that there was no reason for it possibly not to be working. Only then did I see I'd written app.use(cors) instead of app.use(cors()).
- I spent ages trying to get my client-side env var to work so that the front-end contacts the correct back-end depending on whether dev or prod. In the end after going through all the dotenv docs and trying things out, I got nowhere. I couldn't find a way without learning about new things like "webpack", but I knew it couldn't be anything like that as it's too advanced. The assignnment signposts us to it, so it has to be doable at our level. As I worked my way through all this, I learnt by chance that if you're using Vite, it can read the .env file and inject env vars into the client environment, but only ones you've prefixed with "VITE\_" by way of confirming that they aren't secrets. I did it like that even though it would require me to always use Vite, just because it's the only way I could find. Oh wait, I've just seen at the very bottom of the Render lesson it says to do it with a variable. Well, I guess that's what I get for rushing, but now I'm confused. If we do that with a variable then why would we have a client-side env file? What would we be putting in it?
- One nice easy one was that in the server I had a let var for a query string and reassigned it for the GET and the POST. The async GET then failed as it tried to use the value reassigned to the variable for the POST. I'd expected the value of the variable to be captured at the time the method was created, but instead it was a reference to the variable. I like that kind of bug - 10 seconds to fix and you learn something from it!
- Not strictly a problem, but did you know? If a table has no indexes, the 4th row retrieved by a simple SELECT \* is the 4th row you added, as you'd expect, but the Supabase table editor will sort them for display instead of displaying them in their true order. Seems a bit wrong, but I suppose if I didn't add an index then I probably don't get to claim I care about the order...
